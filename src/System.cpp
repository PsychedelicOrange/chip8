//
// Created by parth on 26/5/25.
//

#include "System.h"

namespace chip8
{
    static constexpr uint8_t tiny5[94][5] = {
        {0x80, 0x80, 0x80, 0x00, 0x8},
        {0xA0, 0xA},
        {0x50, 0xF8, 0x50, 0xF8, 0x5},
        {0x40, 0x60, 0xC0, 0x20, 0xC0},
        {0x90, 0x20, 0x40, 0x9},
        {0x40, 0xA0, 0x40, 0xA0, 0x5},
        {0x80, 0x8},
        {0x40, 0x80, 0x80, 0x80, 0x4},
        {0x80, 0x40, 0x40, 0x40, 0x8},
        {0x40, 0xE0, 0x40, 0xA},
        {0x40, 0xE0, 0x4},
        {0x40, 0x8},
        {0xE},
        {0x8},
        {0x40, 0x40, 0x80, 0x80, 0x8},
        {0x40, 0xA0, 0xA0, 0xA0, 0x4},
        {0x40, 0xC0, 0x40, 0x40, 0x4},
        {0xC0, 0x20, 0x40, 0x80, 0xE},
        {0xC0, 0x20, 0x40, 0x20, 0xC},
        {0x20, 0x60, 0xA0, 0xE0, 0x2},
        {0xE0, 0x80, 0xC0, 0x20, 0xC},
        {0x60, 0x80, 0xC0, 0xA0, 0x4},
        {0xE0, 0x20, 0x40, 0x40, 0x4},
        {0x40, 0xA0, 0x40, 0xA0, 0x4},
        {0x40, 0xA0, 0x60, 0x20, 0xC},
        {0x80, 0x00, 0x00, 0x8},
        {0x40, 0x00, 0x00, 0x40, 0x8},
        {0x20, 0x40, 0x80, 0x40, 0x2},
        {0xE0, 0x00, 0xE},
        {0x80, 0x40, 0x20, 0x40, 0x8},
        {0xC0, 0x20, 0x40, 0x00, 0x4},
        {0x60, 0x90, 0xF0, 0x90, 0x9},
        {0x60, 0x90, 0xB0, 0x80, 0x6},
        {0xE0, 0x90, 0xE0, 0x90, 0xE},
        {0x60, 0x90, 0x80, 0x90, 0x6},
        {0xE0, 0x90, 0x90, 0x90, 0xE},
        {0xF0, 0x80, 0xE0, 0x80, 0xF},
        {0xF0, 0x80, 0xE0, 0x80, 0x8},
        {0x70, 0x80, 0xB0, 0x90, 0x7},
        {0x90, 0x90, 0xF0, 0x90, 0x9},
        {0x80, 0x80, 0x80, 0x80, 0x8},
        {0x20, 0x20, 0x20, 0xA0, 0x4},
        {0x90, 0xA0, 0xC0, 0xA0, 0x9},
        {0x80, 0x80, 0x80, 0x80, 0xE},
        {0x88, 0xD8, 0xA8, 0x88, 0x8},
        {0x90, 0xD0, 0xB0, 0x90, 0x9},
        {0x60, 0x90, 0x90, 0x90, 0x6},
        {0xE0, 0x90, 0xE0, 0x80, 0x8},
        {0x60, 0x90, 0x90, 0xA0, 0x5},
        {0xE0, 0x90, 0xE0, 0x90, 0x9},
        {0x70, 0x80, 0x60, 0x10, 0xE},
        {0xE0, 0x40, 0x40, 0x40, 0x4},
        {0x90, 0x90, 0x90, 0x90, 0x6},
        {0xA0, 0xA0, 0xA0, 0x40, 0x4},
        {0xA8, 0xA8, 0xA8, 0x50, 0x5},
        {0xA0, 0xA0, 0x40, 0xA0, 0xA},
        {0xA0, 0xA0, 0x40, 0x40, 0x4},
        {0xE0, 0x20, 0x40, 0x80, 0xE},
        {0xC0, 0x80, 0x80, 0x80, 0xC},
        {0x80, 0x80, 0x40, 0x40, 0x4},
        {0xC0, 0x40, 0x40, 0x40, 0xC},
        {0x40, 0xA},
        {0xE},
        {0x80, 0x4},
        {0x60, 0xA0, 0xA0, 0x6},
        {0x80, 0xC0, 0xA0, 0xA0, 0xC},
        {0x60, 0x80, 0x80, 0x6},
        {0x20, 0x60, 0xA0, 0xA0, 0x6},
        {0x40, 0xE0, 0x80, 0x6},
        {0x40, 0x80, 0xC0, 0x80, 0x8},
        {0x60, 0xA0, 0xA0, 0x60, 0xC},
        {0x80, 0xC0, 0xA0, 0xA0, 0xA},
        {0x80, 0x00, 0x80, 0x80, 0x80},
        {0x40, 0x00, 0x40, 0x40, 0x40},
        {0x80, 0xA0, 0xC0, 0xA0, 0xA},
        {0x80, 0x80, 0x80, 0x80, 0x8},
        {0xF0, 0xA8, 0xA8, 0xA},
        {0xC0, 0xA0, 0xA0, 0xA},
        {0x40, 0xA0, 0xA0, 0x4},
        {0xC0, 0xA0, 0xA0, 0xC0, 0x8},
        {0x60, 0xA0, 0xA0, 0x60, 0x2},
        {0xC0, 0x80, 0x80, 0x8},
        {0x60, 0xC0, 0x20, 0xC},
        {0x80, 0xC0, 0x80, 0x80, 0x4},
        {0xA0, 0xA0, 0xA0, 0x6},
        {0xA0, 0xA0, 0x40, 0x4},
        {0xA8, 0xA8, 0x50, 0x5},
        {0xA0, 0x40, 0x40, 0xA},
        {0xA0, 0xA0, 0xA0, 0x40, 0x8},
        {0xE0, 0x40, 0x80, 0xE},
        {0x60, 0x40, 0x80, 0x40, 0x6},
        {0x80, 0x80, 0x80, 0x80, 0x8},
        {0xC0, 0x40, 0x20, 0x40, 0xC},
        {0x50, 0xA},
    };

    void System::load_font()
    {
        uint16_t offset = FONT_MEMORY_OFFSET;
        for (const auto character : tiny5)
        {
            for (int j = 0; j < 5; j++)
            {
                memory[offset++] = character[j];
            }
        }
    }

    System::System()
    {
        load_font();
    }
} // chip8
